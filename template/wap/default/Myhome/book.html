<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>预定</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="description" content="ajax方式">
	<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" type="text/css" href="__INDEX__/css/laydate.css">
	<script src="__INDEX__/js/jquery-1.7.2.min.js"></script>
	<script type="text/javascript">
        $(document).ready(function () {
            $("#login").click(function () {
                var username = $('#username').val();
                var phone = $('#phone').val();
                var num = $('#num').val();
                var sj = $('#date').val();
                var date = $('#test1').val();
                var isMobile=/^(?:13\d|15\d)\d{5}(\d{3}|\*{3})$/;
                var isPhone=/^((0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/;
                if (username == '') {
                    alert("请输入姓名");
                    return false;
                }
                else {
                    if (phone == '') {
                        alert("请输入电话");
                        return false;
                    }else
                    if (num == '') {
                        alert("请输入人数");
                        return false;
                    }else
                    if (date == '') {
                        alert("请输入日期");
                        return false;
                    }else
                    if (sj == '') {
                        alert("请输入具体时间");
                        return false;
                    }else
                    if(!isNaN(username)){
                        alert("请填写正确的姓名");
                        return false;
                    }else
                        $.ajax({
                            type: "POST",   //提交的方法
                            url:"{:__URL('APP_MAIN/Myhome/book')}", //提交的地址  url
                            data:$('#form1').serialize(),// 序列化表单值 表单id
                            async: false,
                            error: function(request) {  //失败的话
                                alert("Connection error");
                            },
                            success: function(data) {  //成功
                                if (data.error == 0) {
                                    alert(data.message);
                                    window.location.href = '{:url(\'wap/index\')}'
                                }
                                else
                                {
                                    alert(data.message);
                                }
                            }
                        });
                }
            });
        });
	</script>
</head>
<style type="text/css">
	*{margin:0;padding:0;}
	#form-div{width: 100%;height: auto;}
	#form1{width: 100%;height: auto;display: block;}
	#form1 h2{font-size: 18px;text-align: center;height: 40px;line-height: 40px;width: 100%;}
	#form1 p{font-size: 15px;text-align: center;height: 30px;line-height: 30px;width: 100%;}
	#form1 p input{width: 30%;font-size: 15px;border:1px solid gray;outline: none;}
	.demo-footer{padding: 50px 0; color: #999; font-size: 14px;}
	.demo-footer a{padding: 0 5px; color: #01AAED;}
</style>
<body>
<div id="form-div">
	<form id="form1"><!--将form元素的属性action和method去掉，添加id=”form1”,form元素就变为<form id="form1">-->
		<h2>预定</h2>
		<p>姓名：<input name="username" type="text" id="username" value=""/></p>
		<p>电话：<input name="telphone" type="tel" id="phone" value=""/></p>
		<p>人数：<input name="renshu" type="num" id="num"  value=""/></p>
		<p>日期：<input type="text" class="demo-input" placeholder="请选择日期" name="jHsDateInput" id="jHsDateInput"/></p>
		<textarea rows="3" name="message" id="message" cols="40" placeholder="留言信息" style="font-size:15px;border:1px solid gray;width:80%;margin:0 10%;"></textarea>
		<input type="hidden" name="userid" id="userid" value="{$userid}" />
		<p style="margin-top:20px;"><input type="button" value="提交" id="login"></p>
	</form>
</div>
<script src="__INDEX__/js/laydate.js"></script>
<script>
    lay('#version').html('-v'+ laydate.v);

    //执行一个laydate实例
    laydate.render({
        elem: '#jHsDateInput' //指定元素，
        ,type: 'datetime'
    });
</script>
</body>
</html>